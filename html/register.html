<!doctype html>

<html lang="ar" dir="rtl" class="layout-wide customizer-hide" data-assets-path="../assets/" data-template="vertical-menu-template-free">

  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title>إنشاء مستخدم جديد - نظام إدارة النفقة </title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/vendor/fonts/iconify-icons.css" />

    <!-- Core CSS -->
    <!-- build:css assets/vendor/css/theme.css  -->
    <link rel="stylesheet" href="../assets/vendor/css/core.css" />
    <link rel="stylesheet" href="../assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <!-- endbuild -->

    <!-- Page CSS -->
    <link rel="stylesheet" href="../assets/vendor/css/pages/page-auth.css" />

    <!-- Helpers -->
    <script src="../assets/vendor/js/helpers.js"></script>

    <!-- Template JS -->
    <script src="../assets/js/config.js"></script>
    <style>
    .form-loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      background-color: rgba(255,255,255,0.6);
      width: 100%;
      height: 100%;
      z-index: 1100;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .form-position-relative {
      position: relative;
    }
    </style>
  </head>

  <body>
    <!-- Content -->

    <div class="container-xxl">
      <div class="authentication-wrapper authentication-basic container-p-y">
        <div class="authentication-inner w-100" style="max-width: 1100px; margin: auto;">
          <!-- Register Card -->
          <div class="card w-100 px-sm-6 px-3">
            <div class="card-body">
              <!-- Logo -->
              <div class="app-brand justify-content-center mb-3">
                <a href="#" class="app-brand-link gap-2 d-flex flex-column align-items-center">
                  <img src="../assets/img/favicon/logo.png" alt="شعار عِوض" width="200">
                </a>
              </div>
              <!-- /Logo -->
              <h4 class="mb-1">أنشئ حسابك الآن </h4>
              <p class="mb-6">أهلاً بك في نظام تتبع نفقة المطلقات</p>
              <div class="offcanvas-body form-position-relative"></div>
              <!-- Spinner-->
              <div id="formLoading" class="form-loading-overlay d-none">
                <div class="spinner-border text-secondary" role="status" style="width: 3rem; height: 3rem;    margin-top: -300px;">
                  <span class="visually-hidden">جاري التحميل...</span>
                </div>
              </div>
              
              <form id="formRegister" class="mb-6" action="index.html">
                <div id="error-message" class="alert alert-danger d-none" role="alert"></div>
                
                <div class="row">
                  <div class="mb-4 col-md-6">
                    <label for="firstName" class="form-label">الاسم الأول</label>
                    <input type="text" class="form-control" id="firstName" name="firstName" placeholder="أدخل الاسم الأول">
                  </div>
                  <div class="mb-4 col-md-6">
                    <label for="middleName" class="form-label">اسم الأب</label>
                    <input type="text" class="form-control" id="middleName" name="middleName" placeholder="أدخل اسم الأب">
                  </div>

                  <div class="mb-4 col-md-6">
                    <label for="lastName" class="form-label">اللقب</label>
                    <input type="text" class="form-control" id="lastName" name="lastName" placeholder="أدخل اللقب">
                  </div>
                  <div class="mb-4 col-md-6">
                    <label for="phone" class="form-label">رقم الهاتف</label>
                    <input type="text" class="form-control" id="phone" name="phone" placeholder="أدخل رقم الهاتف" maxlength="12" >
                  </div>

                  <div class="mb-4 col-md-6">
                    <label for="email" class="form-label">البريد الإلكتروني</label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="example@email.com">
                  </div>


                  <div class="mb-4 col-md-6">
                    <label for="passport" class="form-label">رقم الجواز</label>
                    <input type="text" class="form-control" id="passport" name="passport" placeholder="أدخل رقم الجواز" maxlength="8">
                  </div>

                  <div class="mb-4 col-md-6">
                    <label for="address" class="form-label">العنوان</label>
                    <input type="text" class="form-control" id="address" name="address" placeholder="أدخل العنوان">
                  </div>

                  <div class="mb-4 col-6">
                    <label for="birthdate" class="form-label">تاريخ الميلاد</label>
                    <input type="date" class="form-control" id="birthdate" name="birthdate">
                  </div>

                  <div class="mb-4 col-md-6">
                    <div class="border rounded p-3 h-100">
                      <label class="form-label d-block mb-2">الصفة</label>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role_type" id="divorced" value="4">
                        <label class="form-check-label" for="divorced">مطلقة</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role_type" id="agent" value="5">
                        <label class="form-check-label" for="agent">وكيل المطلقة</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="role_type" id="ex_husband" value="3">
                        <label class="form-check-label" for="ex_husband">الزوج السابق</label>
                      </div>
                    </div>
                  </div>

                  <div class="mb-4 col-md-6">
                    <div class="border rounded p-3 h-100">
                      <label class="form-label d-block mb-2">الجنس</label>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="gender" id="male" value="0">
                        <label class="form-check-label" for="male">ذكر</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="gender" id="female" value="1">
                        <label class="form-check-label" for="female">أنثى</label>
                      </div>
                    </div>
                  </div>


                  <div class="mb-4 col-md-6">
                    <div class="border rounded p-3 h-100">
                      <label class="form-label d-block mb-2">الجنسية</label>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="nationality" id="libyan" value="0">
                        <label class="form-check-label" for="libyan">ليبي</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="nationality" id="foreigner" value="1">
                        <label class="form-check-label" for="foreigner">أجنبي</label>
                      </div>
                    </div>
                </div>

                <div class="mb-4 col-6" id="nidField">
                  <label for="NID" class="form-label"> الرقم الوطني</label>
                  <input type="text" class="form-control" id="NID" name="NID" maxlength="12">
                </div>

                <!--Account data-->
                <div class="mb-4 col-md-12">
                  <div class="border rounded p-3 h-100">
                    <label class="form-label d-block fw-bold fs-4 mb-3">بيانات الحساب</label>
                    <div class="row">
                      <div class="mb-3 col-md-6">
                        <label for="username" class="form-label">اسم المستخدم</label>
                        <input type="text" class="form-control" id="username" name="username" placeholder="أدخل اسم المستخدم">
                      </div>
                      <div class="mb-3 col-md-6">
                        <label for="password" class="form-label">كلمة المرور</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="********" minlength="8">
                      </div>
                    </div>
                  </div>
                </div>

                <!-- <div class="my-7">
                  <div class="form-check mb-0">
                    <input class="form-check-input" type="checkbox" id="terms-conditions" name="terms" />
                    <label class="form-check-label" for="terms-conditions">
                      أوافق على
                      <a href="javascript:void(0);">سياسة الخصوصية والشروط</a>
                    </label>
                  </div>
                </div> -->
                <button class="btn btn-primary d-grid w-100 mb-2" type="submit">تسجيل</button>
              </form>

              <p class="text-center">
                <span>لديك حساب بالفعل؟</span>
                <a href="login.html">
                  <span>تسجيل الدخول</span>
                </a>
              </p>
            </div>
          </div>
          <!-- Register Card -->
        </div>
        </div>
      </div>
    </div>

    <!-- / Content -->

    <!-- Core JS -->

    <script src="../assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../assets/vendor/libs/popper/popper.js"></script>
    <script src="../assets/vendor/js/bootstrap.js"></script>
    <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="../assets/vendor/js/menu.js"></script>

    <!-- Main JS -->
    <script src="../assets/js/main.js"></script>

    <!-- Page JS -->
    <script type="module" src="../assets/js/pages/register.js"></script>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
    const libyanRadio = document.getElementById("libyan");
    const foreignRadio = document.getElementById("foreigner");
    const nidFieldWrapper = document.getElementById("nidField");
    const nidInput = document.getElementById("NID");

    function toggleNIDField() {
      if (libyanRadio.checked) {
        nidFieldWrapper.style.display = "block";
        nidInput.disabled = false;
      } else {
        nidFieldWrapper.style.display = "none";
        nidInput.disabled = true;
        nidInput.value = ""; // مسح الحقل إذا كان أجنبي
      }
    }

    libyanRadio.addEventListener("change", toggleNIDField);
    foreignRadio.addEventListener("change", toggleNIDField);

    // تشغيل الوظيفة مبدئياً
    toggleNIDField();


    // إضافة حدث عند تغيير نوع الدور
 const divorcedRadio = document.getElementById("divorced");
  const agentRadio = document.getElementById("agent");
  const exHusbandRadio = document.getElementById("ex_husband");

  const maleRadio = document.getElementById("male");
  const femaleRadio = document.getElementById("female");

  const genderRadios = document.getElementsByName("gender");

  function updateGenderBasedOnRole() {
    if (divorcedRadio.checked) {
      femaleRadio.checked = true;
      femaleRadio.disabled = false;
      maleRadio.checked = false;
      maleRadio.disabled = true;
    } else if (exHusbandRadio.checked) {
      maleRadio.checked = true;
      maleRadio.disabled = false;
      femaleRadio.checked = false;
      femaleRadio.disabled = true;
    } else {
      // وكيل المطلقة أو لا شيء محدد
      maleRadio.disabled = false;
      femaleRadio.disabled = false;
    }
  }

  // إضافة أحداث عند تغيير الصفة
  divorcedRadio.addEventListener("change", updateGenderBasedOnRole);
  agentRadio.addEventListener("change", updateGenderBasedOnRole);
  exHusbandRadio.addEventListener("change", updateGenderBasedOnRole);

  // تشغيل الوظيفة عند تحميل الصفحة
  updateGenderBasedOnRole();
    });
    </script>

  </body>
</html>
